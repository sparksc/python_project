{% extends 'layout.html' %}

{% block main %}

<div class="row">
    {% for car in all_car %}
    {% if car.is_active == '1' %}
    <div class="col s6 m4 l3">
        <div class="card medium grey lighten-4">
            <div class="card-image">
                <div class="row">
                    <div class="col s6 m6 l6">
                        <img class="materialboxed" src="/static/images/car/fimg_{{ car.img_serial }}.png">
                    </div>
                    <div class="col s6 m6 l6">
                        <img class="materialboxed" src="/static/images/car/bimg_{{ car.img_serial }}.png">
                    </div>
                </div>
                <span class="card-title">车辆信息</span>
            </div>
            <div class="card-content">
                <div class="row">
                    <div class="input-field col s6">
                        <input value="{{ car.serial }}" type="text" class="validate" disabled>
                        <label for="icon_prefix">车辆编号</label>
                    </div>
                    <div class="input-field col s6">
                        <input value="{{ car.number_plate }}" type="text" class="validate" disabled>
                        <label for="icon_telephone">车牌号</label>
                    </div>
                </div>
                <div class="card-action">
                    <a id="{{ car.id }}" href="#" class="green-text modify_btn">修改</a>
                    <a id="{{ car.id }}" href="#" class="red-text del_btn">删除</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}

    <div class="col s6 m4 l3">
        <div class="card medium center-align grey lighten-2">
            <div class="center-align">
                <img src="/static/images/addicon.png" height="400">
            </div>
            <div class="card-action">
                <a href="#modal">录入车辆信息</a>
            </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Structure -->
<form id="car_form" name="car_form" class="col s12" method="POST" enctype="multipart/form-data">
<div id="modal" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h5><i class="material-icons">add_circle_outline</i>录入车辆信息</h5>
        <div class="row">
            <div class="input-field col s6">
                <input placeholder="请输入车牌编号" id="serial" name="serial" type="text" class="validate" required>
                <label for="serial">车辆编号</label>
            </div>
            <div class="input-field col s6">
                <input placeholder="请输入车牌号" id="number_plate" name="number_plate" type="text" class="validate" required>
                <label for="number_plate">车牌号</label>
            </div>
        </div>
        <div class="file-field input-field">
            <div class="btn">
                <span>车辆照片一</span>
                <input type="file" id="fimg" name="fimg" placeholder="">
            </div>
            <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
            </div>
        </div>
        <div class="file-field input-field">
            <div class="btn">
                <span>车辆照片二</span>
                <input type="file" id="bimg" name="bimg" placeholder="" required>
            </div>
            <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button id="car_submit" class="modal-action waves-effect waves-green btn-flat">确定</button>
    </div>
</div>
</form>

<form id="car_modify_form" name="car_modify_form" class="col s12" method="POST" enctype="multipart/form-data">
<div id="modify_modal" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h5><i class="material-icons">mode_edit</i>修改车辆信息</h5>
        <div class="row">
            <div class="input-field col s6">
                <input id="e_serial" placeholder="" type="text" class="validate" required>
                <label for="e_serial">车辆编号</label>
            </div>
            <div class="input-field col s6">
                <input id="e_number_plate" placeholder="" type="text" class="validate" required>
                <label for="e_number_plate">车牌号</label>
            </div>
        </div>
        <div class="file-field input-field">
            <div class="btn">
                <span>车辆照片一</span>
                <input type="file" id="fimg" name="fimg" placeholder="">
            </div>
            <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
            </div>
        </div>
        <div class="file-field input-field">
            <div class="btn">
                <span>车辆照片二</span>
                <input type="file" id="bimg" name="bimg" placeholder="" required>
            </div>
            <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button id="car_modify" class="modal-action waves-effect waves-green btn-flat">确定</button>
    </div>
</div>
</div>
</form>

{% include "common/loading.html" %}

{% endblock %}

{% block javascript %}
<script type="text/javascript" src="/static/js/model/car/carManagement.js"></script>
<script>
$(document).ready(function(){
    $('.modal').modal();
    $("#loading").hide();
})
</script>
{% endblock %}

